{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams}from'react-router-dom';import axios from'axios';import styles from'../styles/missingpersondetails.module.css';// Proper module import\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function MissingPersonDetails(){const[person,setPerson]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[compareImage,setCompareImage]=useState(null);const[compareImagePreview,setCompareImagePreview]=useState(null);const[comparisonResult,setComparisonResult]=useState(null);const[comparing,setComparing]=useState(false);const{id}=useParams();useEffect(()=>{fetchPerson();},[id]);const fetchPerson=async()=>{try{const response=await axios.get(\"/api/missing-persons/\".concat(id));setPerson(response.data);setLoading(false);}catch(err){console.error('Error fetching missing person details:',err);setError('Failed to load missing person details. Please try again.');setLoading(false);}};const handleImageUpload=event=>{const file=event.target.files[0];if(file){setCompareImage(file);const reader=new FileReader();reader.onloadend=()=>{setCompareImagePreview(reader.result);};reader.readAsDataURL(file);}};const handleCompare=async()=>{if(!compareImage){setError('Please select an image to compare.');return;}setComparing(true);setError(null);setComparisonResult(null);const formData=new FormData();formData.append('image',compareImage);formData.append('id',id);try{const response=await axios.post(\"/api/missing-persons/compare\",formData,{headers:{'Content-Type':'multipart/form-data'}});setComparisonResult(response.data);}catch(err){console.error('Error comparing images:',err);setError('Failed to compare images. Please try again.');}finally{setComparing(false);}};if(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading...\"});if(error)return/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:error});if(!person)return/*#__PURE__*/_jsx(\"div\",{className:\"not-found\",children:\"Missing person not found.\"});return/*#__PURE__*/_jsxs(\"div\",{className:styles.missingPersonDetails,children:[/*#__PURE__*/_jsx(\"h1\",{className:styles.title,children:person.name}),/*#__PURE__*/_jsx(\"img\",{src:\"data:image/jpeg;base64,\".concat(person.imageData),alt:person.name,style:{width:'250px',height:'250px'}}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Reported by:\"}),\" \",person.reportedByName]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Contact:\"}),\" \",person.reportedByEmail]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Last seen:\"}),\" \",person.lastSeen]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Description:\"}),\" \",person.description||'No description available']}),/*#__PURE__*/_jsxs(\"div\",{className:\"compare-image-section\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Compare Image\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"compare-controls\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleImageUpload,id:\"compare-image-input\",style:{display:'none'}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"compare-image-input\",className:styles.uploadButton,children:compareImage?'Change Image':'Upload Image to Compare'}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCompare,disabled:!compareImage||comparing,className:styles.compareButton,children:comparing?'Comparing...':'Compare Images'})]}),compareImage&&/*#__PURE__*/_jsxs(\"div\",{className:\"selected-image-info\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Selected image: \",compareImage.name]}),compareImagePreview&&/*#__PURE__*/_jsx(\"img\",{src:compareImagePreview,alt:\"Selected for comparison\",className:\"compare-image-preview\",style:{width:'250px',height:'250px'}})]}),comparisonResult&&/*#__PURE__*/_jsxs(\"div\",{className:\"comparison-result\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Comparison Result:\"}),comparisonResult.error?/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:comparisonResult.error}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"similarity-meter\",children:/*#__PURE__*/_jsx(\"div\",{className:\"similarity-fill\",style:{width:\"\".concat(comparisonResult.similarity,\"%\")}})}),/*#__PURE__*/_jsxs(\"p\",{className:\"similarity-percentage\",children:[\"Similarity: \",comparisonResult.similarity.toFixed(2),\"%\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"match-result \".concat(comparisonResult.isMatch?'matched':'not-matched'),children:comparisonResult.isMatch?'Matched':'Not Matched'})]})]})]})]});}export default MissingPersonDetails;","map":{"version":3,"names":["React","useState","useEffect","useParams","axios","styles","jsx","_jsx","jsxs","_jsxs","MissingPersonDetails","person","setPerson","loading","setLoading","error","setError","compareImage","setCompareImage","compareImagePreview","setCompareImagePreview","comparisonResult","setComparisonResult","comparing","setComparing","id","fetchPerson","response","get","concat","data","err","console","handleImageUpload","event","file","target","files","reader","FileReader","onloadend","result","readAsDataURL","handleCompare","formData","FormData","append","post","headers","className","children","missingPersonDetails","title","name","src","imageData","alt","style","width","height","reportedByName","reportedByEmail","lastSeen","description","type","accept","onChange","display","htmlFor","uploadButton","onClick","disabled","compareButton","similarity","toFixed","isMatch"],"sources":["C:/Users/tarun/Downloads/MissingPersonsGradleProject/MissingPersonsGradleProject/src/main/frontend/src/components/MissingPersonDetails.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport axios from 'axios';\nimport styles from '../styles/missingpersondetails.module.css'; // Proper module import\n\nfunction MissingPersonDetails() {\n  const [person, setPerson] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [compareImage, setCompareImage] = useState(null);\n  const [compareImagePreview, setCompareImagePreview] = useState(null);\n  const [comparisonResult, setComparisonResult] = useState(null);\n  const [comparing, setComparing] = useState(false);\n  const { id } = useParams();\n\n  useEffect(() => {\n    fetchPerson();\n  }, [id]);\n\n  const fetchPerson = async () => {\n    try {\n      const response = await axios.get(`/api/missing-persons/${id}`);\n      setPerson(response.data);\n      setLoading(false);\n    } catch (err) {\n      console.error('Error fetching missing person details:', err);\n      setError('Failed to load missing person details. Please try again.');\n      setLoading(false);\n    }\n  };\n\n  const handleImageUpload = (event) => {\n    const file = event.target.files[0];\n    if (file) {\n      setCompareImage(file);\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        setCompareImagePreview(reader.result);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  const handleCompare = async () => {\n    if (!compareImage) {\n      setError('Please select an image to compare.');\n      return;\n    }\n\n    setComparing(true);\n    setError(null);\n    setComparisonResult(null);\n\n    const formData = new FormData();\n    formData.append('image', compareImage);\n    formData.append('id', id);\n\n    try {\n      const response = await axios.post(`/api/missing-persons/compare`, formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n        },\n      });\n\n      setComparisonResult(response.data);\n    } catch (err) {\n      console.error('Error comparing images:', err);\n      setError('Failed to compare images. Please try again.');\n    } finally {\n      setComparing(false);\n    }\n  };\n\n  if (loading) return <div className=\"loading\">Loading...</div>;\n  if (error) return <div className=\"error\">{error}</div>;\n  if (!person) return <div className=\"not-found\">Missing person not found.</div>;\n\n  return (\n      <div className={styles.missingPersonDetails}>\n        <h1 className={styles.title}>{person.name}</h1>\n        <img\n            src={`data:image/jpeg;base64,${person.imageData}`}\n            alt={person.name}\n            style={{width: '250px', height: '250px'}}/>\n        <p>\n          <strong>Reported by:</strong> {person.reportedByName}\n        </p>\n        <p>\n          <strong>Contact:</strong> {person.reportedByEmail}\n        </p>\n        <p>\n          <strong>Last seen:</strong> {person.lastSeen}\n        </p>\n        <p>\n          <strong>Description:</strong> {person.description || 'No description available'}\n        </p>\n\n        <div className=\"compare-image-section\">\n          <h2>Compare Image</h2>\n          <div className=\"compare-controls\">\n            <input\n                type=\"file\"\n                accept=\"image/*\"\n                onChange={handleImageUpload}\n                id=\"compare-image-input\"\n                style={{display: 'none'}}\n            />\n            <label htmlFor=\"compare-image-input\" className={styles.uploadButton}>\n              {compareImage ? 'Change Image' : 'Upload Image to Compare'}\n            </label>\n            <button onClick={handleCompare} disabled={!compareImage || comparing} className={styles.compareButton}>\n              {comparing ? 'Comparing...' : 'Compare Images'}\n            </button>\n          </div>\n\n          {compareImage && (\n              <div className=\"selected-image-info\">\n                <p>Selected image: {compareImage.name}</p>\n                {compareImagePreview && (\n                    <img src={compareImagePreview} alt=\"Selected for comparison\" className=\"compare-image-preview\"\n                         style={{width: '250px', height: '250px'}} />\n                )}\n              </div>\n          )}\n\n          {comparisonResult && (\n              <div className=\"comparison-result\">\n                <h3>Comparison Result:</h3>\n                {comparisonResult.error ? (\n                    <p className=\"error\">{comparisonResult.error}</p>\n                ) : (\n                    <div>\n                      <div className=\"similarity-meter\">\n                        <div\n                            className=\"similarity-fill\"\n                            style={{width: `${comparisonResult.similarity}%`}}\n                        ></div>\n                      </div>\n                      <p className=\"similarity-percentage\">\n                        Similarity: {comparisonResult.similarity.toFixed(2)}%\n                      </p>\n                      <p className={`match-result ${comparisonResult.isMatch ? 'matched' : 'not-matched'}`}>\n                        {comparisonResult.isMatch ? 'Matched' : 'Not Matched'}\n                      </p>\n                    </div>\n                )}\n              </div>\n          )}\n        </div>\n\n      </div>\n  );\n}\n\nexport default MissingPersonDetails;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}