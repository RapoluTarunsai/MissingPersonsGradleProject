{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{Link}from'react-router-dom';import styles from'../styles/missingpersonshome.module.css';import{FaSearch,FaUserPlus}from'react-icons/fa';import DashboardCharts from\"./DashboardCharts\";import styles1 from\"../styles/dashboard.module.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function MissingPersons(){const[missingPersons,setMissingPersons]=useState([]);const[page,setPage]=useState(0);const[loading,setLoading]=useState(false);const[searchQuery,setSearchQuery]=useState('');const[error,setError]=useState(null);useEffect(()=>{fetchMissingPersons();},[page]);const fetchMissingPersons=async()=>{setLoading(true);try{const response=await axios.get(\"/api/missing-persons?page=\".concat(page,\"&size=10\"));setMissingPersons(prevPersons=>[...prevPersons,...response.data.content]);setLoading(false);}catch(error){console.error('Error fetching missing persons:',error);setError('Failed to load missing persons. Please try again.');setLoading(false);}};const handleSearch=async e=>{e.preventDefault();setLoading(true);try{const response=await axios.get(\"/api/missing-persons/search?query=\".concat(searchQuery));setMissingPersons(response.data);setLoading(false);}catch(err){console.error('Error searching missing persons:',err);setError('Failed to search missing persons. Please try again.');setLoading(false);}};const loadMore=()=>{setPage(prevPage=>prevPage+1);};return/*#__PURE__*/_jsxs(\"div\",{className:styles.homeContainer,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.heroSection,children:[/*#__PURE__*/_jsx(\"div\",{className:styles1.dashboardSection,children:/*#__PURE__*/_jsx(DashboardCharts,{missingPersons:missingPersons,matchedPersons:[]})}),/*#__PURE__*/_jsx(\"h1\",{className:styles.mainTitle,children:\"TraceBack\"}),/*#__PURE__*/_jsx(\"p\",{className:styles.subtitle,children:\"Help us reunite families and find missing individuals\"})]}),/*#__PURE__*/_jsx(\"div\",{className:styles.searchSection,children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSearch,className:styles.searchForm,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.searchInputWrapper,children:[/*#__PURE__*/_jsx(FaSearch,{className:styles.searchIcon}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:searchQuery,onChange:e=>setSearchQuery(e.target.value),placeholder:\"Search by name or description...\",className:styles.searchInput})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:styles.searchButton,children:\"Search\"})]})}),/*#__PURE__*/_jsxs(Link,{to:\"/missing-persons/add\",className:styles.addButton,children:[/*#__PURE__*/_jsx(FaUserPlus,{}),/*#__PURE__*/_jsx(\"span\",{children:\"Report Missing Person\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:styles.errorMessage,children:error}),/*#__PURE__*/_jsx(\"div\",{className:styles.gridContainer,children:missingPersons.map(person=>/*#__PURE__*/_jsxs(\"div\",{className:styles.personCard,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.imageWrapper,children:/*#__PURE__*/_jsx(\"img\",{src:\"data:image/jpeg;base64,\".concat(person.imageData),alt:person.name,className:styles.personImage})}),/*#__PURE__*/_jsxs(\"div\",{className:styles.personInfo,children:[/*#__PURE__*/_jsx(\"h3\",{children:person.name}),/*#__PURE__*/_jsx(Link,{to:\"/missing-persons/\".concat(person.id),className:styles.viewButton,children:\"View Details\"})]})]},person.id))}),missingPersons.length===0&&!loading&&/*#__PURE__*/_jsxs(\"div\",{className:styles.noResults,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.noResultsIcon,children:\"\\uD83D\\uDD0D\"}),/*#__PURE__*/_jsx(\"p\",{children:\"No missing persons found.\"})]}),!loading&&missingPersons.length>0&&/*#__PURE__*/_jsx(\"button\",{onClick:loadMore,className:styles.loadMoreButton,children:\"Load More\"}),loading&&/*#__PURE__*/_jsxs(\"div\",{className:styles.loadingSpinner,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.spinner}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"})]})]});}export default MissingPersons;","map":{"version":3,"names":["React","useState","useEffect","axios","Link","styles","FaSearch","FaUserPlus","DashboardCharts","styles1","jsx","_jsx","jsxs","_jsxs","MissingPersons","missingPersons","setMissingPersons","page","setPage","loading","setLoading","searchQuery","setSearchQuery","error","setError","fetchMissingPersons","response","get","concat","prevPersons","data","content","console","handleSearch","e","preventDefault","err","loadMore","prevPage","className","homeContainer","children","heroSection","dashboardSection","matchedPersons","mainTitle","subtitle","searchSection","onSubmit","searchForm","searchInputWrapper","searchIcon","type","value","onChange","target","placeholder","searchInput","searchButton","to","addButton","errorMessage","gridContainer","map","person","personCard","imageWrapper","src","imageData","alt","name","personImage","personInfo","id","viewButton","length","noResults","noResultsIcon","onClick","loadMoreButton","loadingSpinner","spinner"],"sources":["C:/Users/tarun/Downloads/MissingPersonsGradleProject/MissingPersonsGradleProject/src/main/frontend/src/components/MissingPersons.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport  styles from '../styles/missingpersonshome.module.css';\nimport { FaSearch, FaUserPlus } from 'react-icons/fa';\nimport DashboardCharts from \"./DashboardCharts\";\nimport styles1 from \"../styles/dashboard.module.css\";\n\n\nfunction MissingPersons() {\n  const [missingPersons, setMissingPersons] = useState([]);\n  const [page, setPage] = useState(0);\n  const [loading, setLoading] = useState(false);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [error, setError] = useState(null);\n\n\n  useEffect(() => {\n    fetchMissingPersons();\n  }, [page]);\n\n\n  const fetchMissingPersons = async () => {\n    setLoading(true);\n    try {\n      const response = await axios.get(`/api/missing-persons?page=${page}&size=10`);\n      setMissingPersons(prevPersons => [...prevPersons, ...response.data.content]);\n      setLoading(false);\n    } catch (error) {\n      console.error('Error fetching missing persons:', error);\n      setError('Failed to load missing persons. Please try again.');\n      setLoading(false);\n    }\n  };\n  const handleSearch = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    try {\n      const response = await axios.get(`/api/missing-persons/search?query=${searchQuery}`);\n      setMissingPersons(response.data);\n      setLoading(false);\n    } catch (err) {\n      console.error('Error searching missing persons:', err);\n      setError('Failed to search missing persons. Please try again.');\n      setLoading(false);\n    }\n  };\n\n  const loadMore = () => {\n    setPage(prevPage => prevPage + 1);\n  };\n\n  return (\n      <div className={styles.homeContainer}>\n        <div className={styles.heroSection}>\n          <div className={styles1.dashboardSection}>\n            <DashboardCharts\n                missingPersons={missingPersons}\n                matchedPersons={[]}\n            />\n          </div>\n          <h1 className={styles.mainTitle}>TraceBack</h1>\n          <p className={styles.subtitle}>Help us reunite families and find missing individuals</p>\n        </div>\n\n        <div className={styles.searchSection}>\n          <form onSubmit={handleSearch} className={styles.searchForm}>\n            <div className={styles.searchInputWrapper}>\n              <FaSearch className={styles.searchIcon} />\n              <input\n                  type=\"text\"\n                  value={searchQuery}\n                  onChange={(e) => setSearchQuery(e.target.value)}\n                  placeholder=\"Search by name or description...\"\n                  className={styles.searchInput}\n              />\n            </div>\n            <button type=\"submit\" className={styles.searchButton}>\n              Search\n            </button>\n          </form>\n        </div>\n\n        <Link to=\"/missing-persons/add\" className={styles.addButton}>\n          <FaUserPlus />\n          <span>Report Missing Person</span>\n        </Link>\n\n        {error && <div className={styles.errorMessage}>{error}</div>}\n\n        <div className={styles.gridContainer}>\n          {missingPersons.map((person) => (\n              <div key={person.id} className={styles.personCard}>\n                <div className={styles.imageWrapper}>\n                  <img\n                      src={`data:image/jpeg;base64,${person.imageData}`}\n                      alt={person.name}\n                      className={styles.personImage}\n                  />\n                </div>\n                <div className={styles.personInfo}>\n                  <h3>{person.name}</h3>\n                  <Link to={`/missing-persons/${person.id}`} className={styles.viewButton}>\n                    View Details\n                  </Link>\n                </div>\n              </div>\n          ))}\n        </div>\n\n        {missingPersons.length === 0 && !loading && (\n            <div className={styles.noResults}>\n              <div className={styles.noResultsIcon}>üîç</div>\n              <p>No missing persons found.</p>\n            </div>\n        )}\n\n        {!loading && missingPersons.length > 0 && (\n            <button onClick={loadMore} className={styles.loadMoreButton}>\n              Load More\n            </button>\n        )}\n\n        {loading && (\n            <div className={styles.loadingSpinner}>\n              <div className={styles.spinner}></div>\n              <p>Loading...</p>\n            </div>\n        )}\n      </div>\n  );\n}\n\nexport default MissingPersons;\n\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,IAAI,KAAQ,kBAAkB,CACvC,MAAQ,CAAAC,MAAM,KAAM,yCAAyC,CAC7D,OAASC,QAAQ,CAAEC,UAAU,KAAQ,gBAAgB,CACrD,MAAO,CAAAC,eAAe,KAAM,mBAAmB,CAC/C,MAAO,CAAAC,OAAO,KAAM,gCAAgC,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAGrD,QAAS,CAAAC,cAAcA,CAAA,CAAG,CACxB,KAAM,CAACC,cAAc,CAAEC,iBAAiB,CAAC,CAAGf,QAAQ,CAAC,EAAE,CAAC,CACxD,KAAM,CAACgB,IAAI,CAAEC,OAAO,CAAC,CAAGjB,QAAQ,CAAC,CAAC,CAAC,CACnC,KAAM,CAACkB,OAAO,CAAEC,UAAU,CAAC,CAAGnB,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAACoB,WAAW,CAAEC,cAAc,CAAC,CAAGrB,QAAQ,CAAC,EAAE,CAAC,CAClD,KAAM,CAACsB,KAAK,CAAEC,QAAQ,CAAC,CAAGvB,QAAQ,CAAC,IAAI,CAAC,CAGxCC,SAAS,CAAC,IAAM,CACduB,mBAAmB,CAAC,CAAC,CACvB,CAAC,CAAE,CAACR,IAAI,CAAC,CAAC,CAGV,KAAM,CAAAQ,mBAAmB,CAAG,KAAAA,CAAA,GAAY,CACtCL,UAAU,CAAC,IAAI,CAAC,CAChB,GAAI,CACF,KAAM,CAAAM,QAAQ,CAAG,KAAM,CAAAvB,KAAK,CAACwB,GAAG,8BAAAC,MAAA,CAA8BX,IAAI,YAAU,CAAC,CAC7ED,iBAAiB,CAACa,WAAW,EAAI,CAAC,GAAGA,WAAW,CAAE,GAAGH,QAAQ,CAACI,IAAI,CAACC,OAAO,CAAC,CAAC,CAC5EX,UAAU,CAAC,KAAK,CAAC,CACnB,CAAE,MAAOG,KAAK,CAAE,CACdS,OAAO,CAACT,KAAK,CAAC,iCAAiC,CAAEA,KAAK,CAAC,CACvDC,QAAQ,CAAC,mDAAmD,CAAC,CAC7DJ,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CACD,KAAM,CAAAa,YAAY,CAAG,KAAO,CAAAC,CAAC,EAAK,CAChCA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClBf,UAAU,CAAC,IAAI,CAAC,CAChB,GAAI,CACF,KAAM,CAAAM,QAAQ,CAAG,KAAM,CAAAvB,KAAK,CAACwB,GAAG,sCAAAC,MAAA,CAAsCP,WAAW,CAAE,CAAC,CACpFL,iBAAiB,CAACU,QAAQ,CAACI,IAAI,CAAC,CAChCV,UAAU,CAAC,KAAK,CAAC,CACnB,CAAE,MAAOgB,GAAG,CAAE,CACZJ,OAAO,CAACT,KAAK,CAAC,kCAAkC,CAAEa,GAAG,CAAC,CACtDZ,QAAQ,CAAC,qDAAqD,CAAC,CAC/DJ,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,KAAM,CAAAiB,QAAQ,CAAGA,CAAA,GAAM,CACrBnB,OAAO,CAACoB,QAAQ,EAAIA,QAAQ,CAAG,CAAC,CAAC,CACnC,CAAC,CAED,mBACIzB,KAAA,QAAK0B,SAAS,CAAElC,MAAM,CAACmC,aAAc,CAAAC,QAAA,eACnC5B,KAAA,QAAK0B,SAAS,CAAElC,MAAM,CAACqC,WAAY,CAAAD,QAAA,eACjC9B,IAAA,QAAK4B,SAAS,CAAE9B,OAAO,CAACkC,gBAAiB,CAAAF,QAAA,cACvC9B,IAAA,CAACH,eAAe,EACZO,cAAc,CAAEA,cAAe,CAC/B6B,cAAc,CAAE,EAAG,CACtB,CAAC,CACC,CAAC,cACNjC,IAAA,OAAI4B,SAAS,CAAElC,MAAM,CAACwC,SAAU,CAAAJ,QAAA,CAAC,WAAS,CAAI,CAAC,cAC/C9B,IAAA,MAAG4B,SAAS,CAAElC,MAAM,CAACyC,QAAS,CAAAL,QAAA,CAAC,uDAAqD,CAAG,CAAC,EACrF,CAAC,cAEN9B,IAAA,QAAK4B,SAAS,CAAElC,MAAM,CAAC0C,aAAc,CAAAN,QAAA,cACnC5B,KAAA,SAAMmC,QAAQ,CAAEf,YAAa,CAACM,SAAS,CAAElC,MAAM,CAAC4C,UAAW,CAAAR,QAAA,eACzD5B,KAAA,QAAK0B,SAAS,CAAElC,MAAM,CAAC6C,kBAAmB,CAAAT,QAAA,eACxC9B,IAAA,CAACL,QAAQ,EAACiC,SAAS,CAAElC,MAAM,CAAC8C,UAAW,CAAE,CAAC,cAC1CxC,IAAA,UACIyC,IAAI,CAAC,MAAM,CACXC,KAAK,CAAEhC,WAAY,CACnBiC,QAAQ,CAAGpB,CAAC,EAAKZ,cAAc,CAACY,CAAC,CAACqB,MAAM,CAACF,KAAK,CAAE,CAChDG,WAAW,CAAC,kCAAkC,CAC9CjB,SAAS,CAAElC,MAAM,CAACoD,WAAY,CACjC,CAAC,EACC,CAAC,cACN9C,IAAA,WAAQyC,IAAI,CAAC,QAAQ,CAACb,SAAS,CAAElC,MAAM,CAACqD,YAAa,CAAAjB,QAAA,CAAC,QAEtD,CAAQ,CAAC,EACL,CAAC,CACJ,CAAC,cAEN5B,KAAA,CAACT,IAAI,EAACuD,EAAE,CAAC,sBAAsB,CAACpB,SAAS,CAAElC,MAAM,CAACuD,SAAU,CAAAnB,QAAA,eAC1D9B,IAAA,CAACJ,UAAU,GAAE,CAAC,cACdI,IAAA,SAAA8B,QAAA,CAAM,uBAAqB,CAAM,CAAC,EAC9B,CAAC,CAENlB,KAAK,eAAIZ,IAAA,QAAK4B,SAAS,CAAElC,MAAM,CAACwD,YAAa,CAAApB,QAAA,CAAElB,KAAK,CAAM,CAAC,cAE5DZ,IAAA,QAAK4B,SAAS,CAAElC,MAAM,CAACyD,aAAc,CAAArB,QAAA,CAClC1B,cAAc,CAACgD,GAAG,CAAEC,MAAM,eACvBnD,KAAA,QAAqB0B,SAAS,CAAElC,MAAM,CAAC4D,UAAW,CAAAxB,QAAA,eAChD9B,IAAA,QAAK4B,SAAS,CAAElC,MAAM,CAAC6D,YAAa,CAAAzB,QAAA,cAClC9B,IAAA,QACIwD,GAAG,2BAAAvC,MAAA,CAA4BoC,MAAM,CAACI,SAAS,CAAG,CAClDC,GAAG,CAAEL,MAAM,CAACM,IAAK,CACjB/B,SAAS,CAAElC,MAAM,CAACkE,WAAY,CACjC,CAAC,CACC,CAAC,cACN1D,KAAA,QAAK0B,SAAS,CAAElC,MAAM,CAACmE,UAAW,CAAA/B,QAAA,eAChC9B,IAAA,OAAA8B,QAAA,CAAKuB,MAAM,CAACM,IAAI,CAAK,CAAC,cACtB3D,IAAA,CAACP,IAAI,EAACuD,EAAE,qBAAA/B,MAAA,CAAsBoC,MAAM,CAACS,EAAE,CAAG,CAAClC,SAAS,CAAElC,MAAM,CAACqE,UAAW,CAAAjC,QAAA,CAAC,cAEzE,CAAM,CAAC,EACJ,CAAC,GAbEuB,MAAM,CAACS,EAcZ,CACR,CAAC,CACC,CAAC,CAEL1D,cAAc,CAAC4D,MAAM,GAAK,CAAC,EAAI,CAACxD,OAAO,eACpCN,KAAA,QAAK0B,SAAS,CAAElC,MAAM,CAACuE,SAAU,CAAAnC,QAAA,eAC/B9B,IAAA,QAAK4B,SAAS,CAAElC,MAAM,CAACwE,aAAc,CAAApC,QAAA,CAAC,cAAE,CAAK,CAAC,cAC9C9B,IAAA,MAAA8B,QAAA,CAAG,2BAAyB,CAAG,CAAC,EAC7B,CACR,CAEA,CAACtB,OAAO,EAAIJ,cAAc,CAAC4D,MAAM,CAAG,CAAC,eAClChE,IAAA,WAAQmE,OAAO,CAAEzC,QAAS,CAACE,SAAS,CAAElC,MAAM,CAAC0E,cAAe,CAAAtC,QAAA,CAAC,WAE7D,CAAQ,CACX,CAEAtB,OAAO,eACJN,KAAA,QAAK0B,SAAS,CAAElC,MAAM,CAAC2E,cAAe,CAAAvC,QAAA,eACpC9B,IAAA,QAAK4B,SAAS,CAAElC,MAAM,CAAC4E,OAAQ,CAAM,CAAC,cACtCtE,IAAA,MAAA8B,QAAA,CAAG,YAAU,CAAG,CAAC,EACd,CACR,EACE,CAAC,CAEZ,CAEA,cAAe,CAAA3B,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}