{"ast":null,"code":"import _objectSpread from\"C:/Users/tarun/Downloads/MissingPersonsGradleProject/MissingPersonsGradleProject/src/main/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import axios from'axios';import{useNavigate}from'react-router-dom';import styles from'../styles/login.module.css';import apiClient from\"../util/axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Login(_ref){let{setIsAuthenticated}=_ref;const[credentials,setCredentials]=useState({email:'',password:''});const[error,setError]=useState('');const navigate=useNavigate();const handleSubmit=async e=>{e.preventDefault();setError('');try{const response=await fetch('/api/auth/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(credentials),credentials:'include'// Ensure cookies are sent with the request\n});if(response.ok){const data=await response.json();console.log('Login successful:',data);setIsAuthenticated(true);navigate('/missing-persons');}else{setError('Login failed. Please check your credentials.');}}catch(error){console.error('Error during login:',error);setError('An error occurred during login. Please try again.');}};return/*#__PURE__*/_jsxs(\"div\",{className:styles.container,children:[/*#__PURE__*/_jsx(\"h2\",{className:styles.title,children:\"Login\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:styles.error,children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:styles.form,children:[/*#__PURE__*/_jsx(\"input\",{className:styles.input,type:\"email\",placeholder:\"Email\",onChange:e=>setCredentials(_objectSpread(_objectSpread({},credentials),{},{email:e.target.value})),required:true}),/*#__PURE__*/_jsx(\"input\",{className:styles.input,type:\"password\",placeholder:\"Password\",onChange:e=>setCredentials(_objectSpread(_objectSpread({},credentials),{},{password:e.target.value})),required:true}),/*#__PURE__*/_jsx(\"button\",{className:styles.button,type:\"submit\",children:\"Login\"})]})]});}export default Login;","map":{"version":3,"names":["React","useState","axios","useNavigate","styles","apiClient","jsx","_jsx","jsxs","_jsxs","Login","_ref","setIsAuthenticated","credentials","setCredentials","email","password","error","setError","navigate","handleSubmit","e","preventDefault","response","fetch","method","headers","body","JSON","stringify","ok","data","json","console","log","className","container","children","title","onSubmit","form","input","type","placeholder","onChange","_objectSpread","target","value","required","button"],"sources":["C:/Users/tarun/Downloads/MissingPersonsGradleProject/MissingPersonsGradleProject/src/main/frontend/src/components/Login.js"],"sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport styles from '../styles/login.module.css';\nimport apiClient from \"../util/axios\";\n\nfunction Login({ setIsAuthenticated }) {\n  const [credentials, setCredentials] = useState({ email: '', password: '' });\n  const [error, setError] = useState('');\n  const navigate = useNavigate();\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError('');\n    try {\n      const response = await fetch('/api/auth/login', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(credentials),\n        credentials: 'include' // Ensure cookies are sent with the request\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        console.log('Login successful:', data);\n        setIsAuthenticated(true);\n        navigate('/missing-persons');\n      } else {\n        setError('Login failed. Please check your credentials.');\n      }\n    } catch (error) {\n      console.error('Error during login:', error);\n      setError('An error occurred during login. Please try again.');\n    }\n  };\n\n  return (\n      <div className={styles.container}>\n        <h2 className={styles.title}>Login</h2>\n        {error && <p className={styles.error}>{error}</p>}\n        <form onSubmit={handleSubmit} className={styles.form}>\n          <input\n              className={styles.input}\n              type=\"email\"\n              placeholder=\"Email\"\n              onChange={(e) => setCredentials({...credentials, email: e.target.value})}\n              required\n          />\n          <input\n              className={styles.input}\n              type=\"password\"\n              placeholder=\"Password\"\n              onChange={(e) => setCredentials({...credentials, password: e.target.value})}\n              required\n          />\n          <button className={styles.button} type=\"submit\">Login</button>\n        </form>\n      </div>\n  );\n}\n\nexport default Login;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}