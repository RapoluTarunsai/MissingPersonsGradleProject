{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{useParams}from'react-router-dom';import axios from'axios';import'../styles/missingpersondetails.module.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function MissingPersonDetails(){const[person,setPerson]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[compareImage,setCompareImage]=useState(null);const[comparisonResult,setComparisonResult]=useState(null);const[comparing,setComparing]=useState(false);const{id}=useParams();const fileInputRef=useRef(null);useEffect(()=>{fetchPerson();},[id]);const fetchPerson=async()=>{try{const response=await axios.get(\"/api/missing-persons/\".concat(id));setPerson(response.data);setLoading(false);}catch(err){console.error('Error fetching missing person details:',err);setError('Failed to load missing person details. Please try again.');setLoading(false);}};const handleImageUpload=event=>{setCompareImage(event.target.files[0]);};const handleCompareClick=()=>{fileInputRef.current.click();};const handleCompare=async()=>{if(!compareImage){setError('Please select an image to compare.');return;}setComparing(true);setError(null);setComparisonResult(null);const formData=new FormData();formData.append('image',compareImage);formData.append('id',id);try{const response=await axios.post('/api/missing-persons/compare',formData,{headers:{'Content-Type':'multipart/form-data'}});setComparisonResult(response.data);}catch(err){console.error('Error comparing images:',err);setError('Failed to compare images. Please try again.');}finally{setComparing(false);}};if(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading...\"});if(error)return/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:error});if(!person)return/*#__PURE__*/_jsx(\"div\",{className:\"not-found\",children:\"Missing person not found.\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"missing-person-details\",children:[/*#__PURE__*/_jsx(\"h1\",{children:person.name}),/*#__PURE__*/_jsx(\"img\",{src:\"data:image/jpeg;base64,\".concat(person.imageData),alt:person.name,style:{width:'400px',height:'400px'},className:\"person-image\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Reported by:\"}),\" \",person.reportedByName]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Contact:\"}),\" \",person.reportedByEmail]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Last seen:\"}),\" \",person.lastSeen]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Description:\"}),\" \",person.description||'No description available']}),/*#__PURE__*/_jsxs(\"div\",{className:\"compare-image-section\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Compare Image\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleImageUpload,ref:fileInputRef,style:{display:'none'}}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCompareClick,\"aria-label\":\"Upload image to compare\",className:\"upload-button\",children:\"Upload Image to Compare\"}),compareImage&&/*#__PURE__*/_jsxs(\"p\",{children:[\"Selected file: \",compareImage.name]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCompare,disabled:!compareImage||comparing,className:\"compare-button\",children:comparing?'Comparing...':'Compare Images'}),comparisonResult&&/*#__PURE__*/_jsxs(\"div\",{className:\"comparison-result\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Comparison Result:\"}),typeof comparisonResult==='string'?/*#__PURE__*/_jsx(\"p\",{children:comparisonResult}):/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"p\",{className:\"match-result\",children:comparisonResult.similarity>80?/*#__PURE__*/_jsxs(\"p\",{className:\"match-result positive\",children:[\"\\uD83C\\uDF89 Matched! Similarity: \",comparisonResult.similarity.toFixed(2),\"%\"]}):/*#__PURE__*/_jsxs(\"p\",{className:\"match-result negative\",children:[\"\\u274C No significant match found. Similarity: \",comparisonResult.similarity.toFixed(2),\"%\"]})})})]})]})]});}export default MissingPersonDetails;","map":{"version":3,"names":["React","useState","useEffect","useRef","useParams","axios","jsx","_jsx","jsxs","_jsxs","MissingPersonDetails","person","setPerson","loading","setLoading","error","setError","compareImage","setCompareImage","comparisonResult","setComparisonResult","comparing","setComparing","id","fileInputRef","fetchPerson","response","get","concat","data","err","console","handleImageUpload","event","target","files","handleCompareClick","current","click","handleCompare","formData","FormData","append","post","headers","className","children","name","src","imageData","alt","style","width","height","reportedByName","reportedByEmail","lastSeen","description","type","accept","onChange","ref","display","onClick","disabled","similarity","toFixed"],"sources":["C:/Users/tarun/Downloads/MissingPersonsGradleProject/MissingPersonsGradleProject/src/main/frontend/src/components/MissingPersonDetails.js"],"sourcesContent":["import React, {useState, useEffect, useRef} from 'react';\nimport { useParams } from 'react-router-dom';\nimport axios from 'axios';\nimport '../styles/missingpersondetails.module.css';\n\nfunction MissingPersonDetails() {\n  const [person, setPerson] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [compareImage, setCompareImage] = useState(null);\n  const [comparisonResult, setComparisonResult] = useState(null);\n  const [comparing, setComparing] = useState(false);\n  const { id } = useParams();\n  const fileInputRef = useRef(null);\n\n\n  useEffect(() => {\n    fetchPerson();\n  }, [id]);\n\n  const fetchPerson = async () => {\n    try {\n      const response = await axios.get(`/api/missing-persons/${id}`);\n      setPerson(response.data);\n      setLoading(false);\n    } catch (err) {\n      console.error('Error fetching missing person details:', err);\n      setError('Failed to load missing person details. Please try again.');\n      setLoading(false);\n    }\n  };\n\n  const handleImageUpload = (event) => {\n    setCompareImage(event.target.files[0]);\n  };\n  const handleCompareClick = () => {\n    fileInputRef.current.click();\n  };\n\n  const handleCompare = async () => {\n    if (!compareImage) {\n      setError('Please select an image to compare.');\n      return;\n    }\n\n    setComparing(true);\n    setError(null);\n    setComparisonResult(null);\n\n    const formData = new FormData();\n    formData.append('image', compareImage);\n    formData.append('id', id);\n\n    try {\n      const response = await axios.post('/api/missing-persons/compare', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n        },\n      });\n      setComparisonResult(response.data);\n    } catch (err) {\n      console.error('Error comparing images:', err);\n      setError('Failed to compare images. Please try again.');\n    } finally {\n      setComparing(false);\n    }\n  };\n\n  if (loading) return <div className=\"loading\">Loading...</div>;\n  if (error) return <div className=\"error\">{error}</div>;\n  if (!person) return <div className=\"not-found\">Missing person not found.</div>;\n\n  return (\n      <div className=\"missing-person-details\">\n        <h1>{person.name}</h1>\n        <img src={`data:image/jpeg;base64,${person.imageData}`} alt={person.name} style={{width: '400px', height: '400px'}} className=\"person-image\" />\n        <p><strong>Reported by:</strong> {person.reportedByName}</p>\n        <p><strong>Contact:</strong> {person.reportedByEmail}</p>\n        <p><strong>Last seen:</strong> {person.lastSeen}</p>\n        <p><strong>Description:</strong> {person.description || 'No description available'}</p>\n\n        <div className=\"compare-image-section\">\n          <h2>Compare Image</h2>\n          <input\n              type=\"file\"\n              accept=\"image/*\"\n              onChange={handleImageUpload}\n              ref={fileInputRef}\n              style={{display: 'none'}}\n          />\n          <button onClick={handleCompareClick} aria-label=\"Upload image to compare\" className=\"upload-button\">\n            Upload Image to Compare\n          </button>\n          {compareImage && (\n              <p>Selected file: {compareImage.name}</p>\n          )}\n          <button onClick={handleCompare} disabled={!compareImage || comparing} className=\"compare-button\">\n            {comparing ? 'Comparing...' : 'Compare Images'}\n          </button>\n\n\n          {comparisonResult && (\n              <div className=\"comparison-result\">\n                <h3>Comparison Result:</h3>\n                {typeof comparisonResult === 'string' ? (\n                    <p>{comparisonResult}</p>\n                ) : (\n                    <div>\n                      <p className=\"match-result\">\n                        {comparisonResult.similarity > 80 ? (\n                            <p className=\"match-result positive\">üéâ Matched! Similarity: {comparisonResult.similarity.toFixed(2)}%</p>\n                        ) : (\n                            <p className=\"match-result negative\">‚ùå No significant match found. Similarity: {comparisonResult.similarity.toFixed(2)}%</p>\n                        )}\n                      </p>\n                    </div>\n                )}\n              </div>\n          )}\n        </div>\n      </div>\n  );\n}\n\nexport default MissingPersonDetails;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}